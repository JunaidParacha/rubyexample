<%=link_to 'Edit my profile', edit_login_path(session[:user])%>
<h1>Events</h1>
<h2>Here are some events at your state:</h2>
<table>
  <tr>
    <th>Name</th>
    <th>Date</th>
    <th>Location</th>
    <th>Host</th>
    <th>Action/Status</th>
  </tr>

  <%@instate.each do |event|%>
    <tr>
      <td><%=link_to event.name, event_path(event.id)%></td>
      <td><%=event.date.strftime("%B %d, %Y")%></td>
      <td><%=event.location%></td>
      <td><%=event.user.first_name%></td>
      <td>
        <%if event.user.id == session[:user]%>
          <%=link_to 'Edit'%>
          <%=link_to 'Delete'%>
        <%else%>
          <%if @userevents.any? { |e| e.even_id == event.id  } %>
            Joining <a href="/cancel/<%=event.id %>">Cancel</a>
          <%else%>
            <a href="/join/<%=event.id %>">Join</a>
          <%end%>
        <%end%>
      </td>
    </tr>
  <%end%>
</table>

<h2>Here are some events in other states:</h2>
<table>
  <tr>
    <th>Name</th>
    <th>Date</th>
    <th>Location</th>
    <th>State</th>
    <th>Host</th>
    <th>Action/Status</th>
  </tr>
  <%@outstate.each do |event|%>
    <tr>
      <td><%=link_to event.name, event_path(event.id)%></td>
      <td><%=event.date.strftime("%B %d, %Y")%></td>
      <td><%=event.location%></td>
      <td><%=event.state%></td>
      <td><%=event.user.first_name%></td>
      <td>
        <%if event.user.id == session[:user]%>
          <%=link_to 'Edit'%>
          <%=link_to 'Delete'%>
        <%else%>
          <%if @userevents.any? { |e| e.even_id == event.id  } %>
            Joining <a href="/cancel/<%=event.id %>">Cancel</a>
          <%else%>
            <a href="/join/<%=event.id %>">Join</a>
          <%end%>
        <%end%>
      </td>
    </tr>
  <%end%>
</table>
<br>
<fieldset><legend>Create a new event</legend>
  <form action="/events" method="post">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
    <input type="text" name="event[name]" placeholder="Event Name">
    <input type="date" name="event[date]" placeholder="Event Date">
    <input type="text" name="event[location]" placeholder="Location">
    <select name="event[state]">
      <option value="AL">Alabama</option>
      <option value="AK">Alaska</option>
      <option value="AZ">Arizona</option>
      <option value="AR">Arkansas</option>
      <option value="CA">California</option>
      <option value="CO">Colorado</option>
      <option value="CT">Connecticut</option>
      <option value="DE">Delaware</option>
      <option value="DC">District of Columbia</option>
      <option value="FL">Florida</option>
      <option value="GA">Georgia</option>
      <option value="HI">Hawaii</option>
      <option value="ID">Idaho</option>
      <option value="IL">Illinois</option>
      <option value="IN">Indiana</option>
      <option value="IA">Iowa</option>
      <option value="KS">Kansas</option>
      <option value="KY">Kentucky</option>
      <option value="LA">Louisiana</option>
      <option value="ME">Maine</option>
      <option value="MD">Maryland</option>
      <option value="MA">Massachusetts</option>
      <option value="MI">Michigan</option>
      <option value="MN">Minnesota</option>
      <option value="MS">Mississippi</option>
      <option value="MO">Missouri</option>
      <option value="MT">Montana</option>
      <option value="NE">Nebraska</option>
      <option value="NV">Nevada</option>
      <option value="NH">New Hampshire</option>
      <option value="NJ">New Jersey</option>
      <option value="NM">New Mexico</option>
      <option value="NY">New York</option>
      <option value="NC">North Carolina</option>
      <option value="ND">North Dakota</option>
      <option value="OH">Ohio</option>
      <option value="OK">Oklahoma</option>
      <option value="OR">Oregon</option>
      <option value="PA">Pennsylvania</option>
      <option value="RI">Rhode Island</option>
      <option value="SC">South Carolina</option>
      <option value="SD">South Dakota</option>
      <option value="TN">Tennessee</option>
      <option value="TX">Texas</option>
      <option value="UT">Utah</option>
      <option value="VT">Vermont</option>
      <option value="VA">Virginia</option>
      <option value="WA">Washington</option>
      <option value="WV">West Virginia</option>
      <option value="WI">Wisconsin</option>
      <option value="WY">Wyoming</option>
    </select>
    <input type="submit" value="Add Event">
  </form>
</fieldset>
